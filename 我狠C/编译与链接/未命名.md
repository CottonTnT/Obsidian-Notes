# gcc hello.c的完整过程

$$
Preprocessing{\rightarrow}Compilation{\rightarrow}Assembly{\rightarrow}Liking

$$
- 下面是 gcc 编译过程的分解

![[Pasted image 20230721201458.png]]

*第一步预编译过程相当于* 

<center>gcc -E hello. c -o hello. i</center>
<center>cpp hello. c > hello. i</center>
*编译过程*
<center>gcc -S hello. i -o hello.s</center>
	现在 gcc 一般把预编译与编译两个步骤合并为一个步骤
<center>cc 1 hello.c</center>

	
*汇编*
<center>gcc -c hello.s -o hello.o </center>
或者
<center>as hello. s -o hello.o</center>
*链接*

![[Pasted image 20230721221711.png]]

# 编译器做了什么


- 编译器编译的过程一般可以分为 6 步：扫描、语法分析、语义分析、源代码优化、代码生产和目标代码优化。

- 整个过程如下图所示
![[Pasted image 20230721222126.png]]

## 词法分析


### scanner 
- 首先 source code 被输入到扫描器 (scanner：简单进行词法分析，运用类似于有限状态机算法将源代码的字符序列分割成一系列的记号，即 Token). 如下程序
```c
array[index]=(index + 4) * (2 + 6);
```
![[Pasted image 20230721222943.png]]

>词法分析中的记号一般分为如下几类: 关键字、表示符、字面量（数字、字符串等）、和特殊符号 (+、-等)

 

- 在识别记号的同时, scanner 也完成了如将 `将表示符存放到符号表，将数字、字符串常量存放到文字表` 等工作


###  lex

- lex 可以按照用户之前描述好的词法规则将输入的字符串分割成一个个 token，这样编译器的开发者无需为每个编译器开发一个独立的词法扫描器了，只需根据需要改变语法规则


### 预处理


- 如 C 语言，它的预处理工作一般不归入编译器的范围而交给一个独立的预处理器


## 语法分析


### Grammer parser (语法分析器)

- 对