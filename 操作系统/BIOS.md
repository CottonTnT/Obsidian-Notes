> basic io system

传统的BIOS通常会执行以下步骤来引导计算机系统：

1. 重置后，CPU从预定的地址开始执行BIOS固件。
2. BIOS进行硬件自检（POST，Power-On Self Test）和初始化，并检测可引导设备，确定第一个可引导设备。
3. BIOS将该可引导设备的第一个扇区（通常是512字节）加载到物理内存的0x7C00地址处。这个扇区通常是引导扇区（Boot Sector）或主引导记录（Master Boot Record，MBR）。
4. BIOS将CS（Code Segment）寄存器设置为0，将IP（Instruction Pointer）寄存器设置为0x7C00，将执行控制权转交给引导扇区的代码。
5. 引导扇区的代码开始执行，它通常是引导加载程序（Boot Loader）。
6. 引导加载程序负责进一步加载操作系统的核心文件，初始化环境，并将控制权交给操作系统。

通过将CS:IP设置为0x7C00，CPU将从物理内存的0x7C00地址处开始执行引导扇区的代码。这是因为在实模式下，物理内存地址等同于逻辑地址，所以可以直接使用该地址作为CS:IP的起始执行位置。

需要注意的是，这个过程是基于传统的x86架构和BIOS的引导方式。现代的计算机系统可能采用不同的引导方式，比如使用UEFI固件和GPT分区表。因此，具体的实现方式可能会有所不同。


## 0.1 MBR
>Master Boot Record

MBR是指硬盘上的一个特殊的引导扇区（Boot Sector），位于磁盘的第一个物理扇区（扇区编号为0）。MBR包含引导加载程序（Boot Loader）和分区表（Partition Table）两个主要组成部分。

引导加载程序是一个小型的机器码程序，负责启动操作系统。当计算机启动时，BIOS（Basic Input/Output System）会读取硬盘的第一个扇区（即MBR），将控制权交给引导加载程序。引导加载程序进一步加载操作系统的核心文件，从而启动操作系统的加载和执行过程。

分区表是一个记录了硬盘上分区信息的数据结构。MBR中的分区表可以容纳最多四个主分区（Primary Partition）或三个主分区和一个扩展分区（Extended Partition）。每个分区表项包含了分区的起始位置、大小和类型等信息。

MBR的一些限制包括：

1. MBR只能支持最多四个主分区或三个主分区和一个扩展分区。如果需要更多的分区，可以使用扩展分区来创建逻辑分区（Logical Partition）。
2. MBR中的引导加载程序的大小有限，通常为446字节。这限制了引导加载程序的功能和复杂性。
3. MBR使用32位的逻辑块地址（Logical Block Addressing，LBA）来表示硬盘上的扇区位置，因此对于大于2TB的硬盘容量，MBR可能无法正确识别和使用。