![[Pasted image 20231213151248.png]]



# 关系模型


## Relation Algebra
>defines the high-level steps of how to compute a query

![[Pasted image 20231213142429.png]]

###### SELECT
![[Pasted image 20231213142707.png]]

###### PROJECTION(投影)
>根据要求产生一张新的表

![[Pasted image 20231213142915.png]]

###### UNION
>把两个查询的结果汇聚为一张表
![[Pasted image 20231213143640.png]]

###### INTERSECTION
>对两个表取交集
![[Pasted image 20231213143805.png]]

###### DIFFERENCE
> 取补集

![[Pasted image 20231213143912.png]]

###### PRODUCT
>取笛卡尔积

![[Pasted image 20231213143949.png]]

###### join
>

![[Pasted image 20231213144114.png]]

###### other
![[Pasted image 20231213144149.png]]

## RELATION LANGUAGES

![[Pasted image 20231213145104.png]]

sql语言的分类
![[Pasted image 20231213145253.png]]

# 数据库引擎

## 现状
![[Pasted image 20231213151442.png]]

![[Pasted image 20231213151954.png]]

![[Pasted image 20231213152109.png]]

- 数据库执行的大概流程

![[Pasted image 20231213152740.png]]

- why not use the os(mmap)?
![[Pasted image 20231213153059.png]]![[Pasted image 20231213153146.png]]

- 数据库存储要解决的问题
![[Pasted image 20231213153419.png]]

![[Pasted image 20231213153727.png]]

![[Pasted image 20231213153808.png]]

![[Pasted image 20231213153934.png]]
> 对于操作系统来说就是一个大文件，对于数据库来说里面是分割好的一个个页

![[Pasted image 20231213154135.png]]
![[Pasted image 20231213154209.png]]

- page layout
![[Pasted image 20231213154957.png]]
- - how data organize the data inside of the page
![[Pasted image 20231213160538.png]]


- tuple layout

![[Pasted image 20231213160333.png]]



# Buffer Pool
> How the DBMS manages its memory and move data back-and-forch from disk

- 缓存用户数据
- 缓存数据的更新


![[Pasted image 20231213180341.png]]


## Buffer Pool Manager


#### buffer pool meta-data

![[Pasted image 20231213181044.png]]
#### locks 与 latches 的区别
![[Pasted image 20231213180950.png]]

#### page table 与 page directory
![[Pasted image 20231213181141.png]]
## Replacement Polocies


## Other Memory Pools